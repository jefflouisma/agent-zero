<html>
<head>
    <title>Notification Toast Stack</title>
    <script type="module">
        import { store } from "/components/notifications/notification-store.js";
    </script>
</head>
<body>
    <div x-data>
        <template x-if="$store.notificationStore">
            <!-- Toast Stack Container -->
            <div class="fixed bottom-5 right-5 z-[15000] flex flex-col-reverse gap-2 items-end pointer-events-none w-full max-w-xs md:max-w-sm"
                 x-show="$store.notificationStore.toastStack.length > 0">

            <template x-for="(toast, index) in $store.notificationStore.toastStack" :key="toast.toastId">
                <div class="pointer-events-auto flex items-start w-full p-4 text-gray-500 bg-white rounded-lg shadow-lg dark:text-gray-400 dark:bg-gray-800 border border-gray-200 dark:border-gray-700"
                     :class="$store.notificationStore.getNotificationClass(toast.type)"
                     @click="$store.notificationStore.handleToastClick(toast.toastId)"
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="translate-x-full opacity-0"
                     x-transition:enter-end="translate-x-0 opacity-100"
                     x-transition:leave="transition ease-in duration-200"
                     x-transition:leave-start="translate-x-0 opacity-100"
                     x-transition:leave-end="translate-x-full opacity-0">

                    <!-- Toast Icon -->
                    <div class="inline-flex items-center justify-center shrink-0 w-8 h-8 rounded-lg"
                         :class="$store.notificationStore.getNotificationIconClass(toast.type)"
                         x-html="$store.notificationStore.getNotificationIcon(toast.type)">
                    </div>

                    <!-- Toast Content -->
                    <div class="ml-3 text-sm font-normal flex-1 break-words">
                        <div class="text-sm font-semibold text-gray-900 dark:text-white mb-1"
                             x-show="toast.title"
                             x-text="toast.title">
                        </div>
                        <div class="text-sm"
                             x-text="toast.message">
                        </div>
                    </div>

                    <!-- Toast Dismiss -->
                    <button type="button" 
                            class="ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" 
                            @click.stop="$store.notificationStore.dismissToast(toast.toastId)"
                            aria-label="Close">
                        <span class="material-symbols-outlined text-base">close</span>
                    </button>
                </div>
            </template>
          </div>
        </template>
    </div>
</body>
</html>
