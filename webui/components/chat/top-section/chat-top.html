<html>
<head>
    <title>Chat Top</title>
    <!-- Import the alpine store -->
    <script type="module">
        import { store } from "/components/chat/top-section/chat-top-store.js";
    </script>
</head>
<body>
    <!-- This construct of x-data + x-if is used to ensure the component is only rendered when the store is available -->
    <div x-data class="w-full">
        <template x-if="$store.chatTop">
            <!-- Time and Date -->
            <div class="flex items-center justify-between px-4 py-2 border-b border-gray-200 bg-gray-50/90 backdrop-blur dark:bg-gray-900/90 dark:border-gray-700">
                <div class="flex items-center gap-3">
                    <div id="time-date" class="text-xs font-medium leading-tight text-gray-500 dark:text-gray-400"></div>
                    
                    <div class="flex items-center justify-center w-6 h-6">
                        <svg viewBox="0 0 30 30" class="w-full h-full">
                            <!-- Connected State (filled circle) -->
                            <circle class="transition-opacity duration-300" cx="15" cy="15" r="8"
                                x-bind:fill="$store.chatTop.connected ? '#10B981' : 'none'" 
                                x-bind:opacity="$store.chatTop.connected ? 1 : 0" />

                            <!-- Disconnected State (outline circle) -->
                            <circle class="transition-opacity duration-300" cx="15" cy="15" r="12" fill="none" stroke="#EF4444"
                                stroke-width="3" x-bind:opacity="$store.chatTop.connected ? 0 : 1" />
                        </svg>
                    </div>
                </div>

                <div class="flex items-center gap-2">
                    <!-- Notification Toggle -->
                    <x-component path="notifications/notification-icons.html"></x-component>
                    <!-- Project Selector -->
                    <x-component path="projects/project-selector.html"></x-component>
                </div>
            </div>
        </template>
    </div>
</body>
</html>