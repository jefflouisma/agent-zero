<html>

<head>
    <title>Create a new project</title>
    <script type="module">
        import { store } from "/components/projects/projects-store.js";
    </script>
</head>

<body>
    <div x-data>
        <template x-if="$store.projects && $store.projects.selectedProject">
            <div>
                <div class="flex items-center justify-between py-4 border-b border-gray-200 dark:border-gray-700">
                    <div class="flex-1 pr-4">
                        <label class="block text-sm font-medium text-gray-900 dark:text-white">Inject project structure into context window</label>
                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">When turned on, the project file structure will be injected into the context window of the agent. This is useful for agents that need to have an overview of project folders and files at all times.</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" x-model="$store.projects.selectedProject.file_structure.enabled" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                    </label>
                </div>

                <div x-show="$store.projects.selectedProject.file_structure.enabled" class="space-y-4 mt-6">

                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Max Depth</label>
                        <p class="mb-2 text-xs text-gray-500 dark:text-gray-400">Set the maximum depth for the file structure (0 = unlimited).</p>
                        <input type="number" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                            x-model.number="$store.projects.selectedProject.file_structure.max_depth" min="0" step="1"
                            placeholder="0">
                    </div>

                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Max Lines</label>
                        <p class="mb-2 text-xs text-gray-500 dark:text-gray-400">Maximum total lines outputted for the agent. This limits the space occupied in the context window (0 = unlimited).</p>
                        <input type="number" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                            x-model.number="$store.projects.selectedProject.file_structure.max_lines" min="0" step="1"
                            placeholder="0">
                    </div>

                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Max Folders</label>
                        <p class="mb-2 text-xs text-gray-500 dark:text-gray-400">Maximum number of subfolders to display under one folder (0 = unlimited).</p>
                        <input type="number" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                            x-model.number="$store.projects.selectedProject.file_structure.max_folders" min="0" step="1"
                            placeholder="0">
                    </div>

                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Max Files</label>
                        <p class="mb-2 text-xs text-gray-500 dark:text-gray-400">Maximum number of files to display under one folder (0 = unlimited).</p>
                        <input type="number" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                            x-model.number="$store.projects.selectedProject.file_structure.max_files" min="0" step="1"
                            placeholder="0">
                    </div>

                    <div>
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Ignored files / folders</label>
                        <p class="mb-2 text-xs text-gray-500 dark:text-gray-400">Specify patterns in gitignore format. These files and folders will be skipped during analysis.</p>
                        <textarea class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 font-mono"
                            x-model="$store.projects.selectedProject.file_structure.gitignore" rows="5"
                            placeholder="Enter gitignore patterns (e.g., node_modules/, .git/, *.log)"></textarea>
                    </div>

                    <div class="pt-2">
                        <button type="button" class="py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 flex items-center gap-2" 
                            x-on:click="$store.projects.testFileStructure()">
                            <span class="material-symbols-outlined text-lg">account_tree</span>
                            <span>Test output</span>
                        </button>
                    </div>

                </div>

            </div>
        </template>
    </div>
</body>

<style>
</style>

</html>