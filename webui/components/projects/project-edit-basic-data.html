<html>

<head>
    <title>Project basic data</title>
    <script type="module">
        import { store } from "/components/projects/projects-store.js";
    </script>
</head>

<body>
    <div x-data>
        <template x-if="$store.projects && $store.projects.selectedProject">
            <div>

                <template x-if="!$store.projects.selectedProject._meta.creating">
                    <div class="mb-4">
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Folder name</label>
                        <p class="mb-2 text-xs text-gray-500 dark:text-gray-400">Project files and settings are located in <strong class="text-gray-900 dark:text-white"><span x-text="$store.projects.getSelectedAbsPath()"></span></strong></p>
                        <div class="flex gap-2">
                            <input class="bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 cursor-not-allowed dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500" 
                                type="text" x-model="$store.projects.selectedProject.name" disabled>
                            <button class="py-2.5 px-4 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 flex items-center gap-2" 
                                @click="$store.projects.browseSelected()">
                                <span class="material-symbols-outlined text-lg">folder</span>
                                <span>Browse</span>
                            </button>
                        </div>
                    </div>
                </template>

                <div class="mb-4">
                    <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Title</label>
                    <p class="mb-2 text-xs text-gray-500 dark:text-gray-400">Title and description are visible to both you and the agent and can help it understand the project.</p>
                    <input class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" 
                        type="text" x-model="$store.projects.selectedProject.title" placeholder="Optional title">
                </div>

                <div class="mb-4">
                    <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Color</label>
                    <div class="flex flex-wrap gap-2 items-center">
                        <div class="w-8 h-8 rounded-full cursor-pointer flex items-center justify-center border border-gray-200 dark:border-gray-600 hover:opacity-80 transition-opacity bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"
                            :class="{'ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800': !$store.projects.selectedProject.color}"
                            @click="$store.projects.selectedProject.color = ''">
                            <span class="text-xl leading-none">Ã—</span>
                        </div>
                        <template x-for="c in $store.projects.colors" :key="c">
                            <div class="w-8 h-8 rounded-full cursor-pointer hover:opacity-90 transition-opacity" 
                                :style="`background:${c}`"
                                :class="{'ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-800': $store.projects.selectedProject.color === c}"
                                @click="$store.projects.selectedProject.color = c">
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </template>
    </div>
</body>

<style>
    .project-path {
        font-size: 0.8em;
        opacity: 0.7;
        margin-top: 0.25em;
        word-break: break-all;
    }

    .projects-form-group {
        display: flex;
        flex-direction: column;
        gap: 0.35em;
        margin-bottom: 0.8em;
    }

    .projects-form-label {
        font-size: 1em;
        font-weight: bolder;
        opacity: 1;
        margin-bottom: var(--spacing-sm);
    }

    .projects-form-description {
        font-size: 0.8em;
        margin-bottom: var(--spacing-xs);
    }

    .projects-form-input,
    .projects-form-textarea {
        background: var(--color-input);
        color: var(--color-text);
        border: 1px solid var(--color-border);
        border-radius: 0.375em;
        padding: 0.5em 0.6em;
        outline: none;
    }

    .projects-form-input:focus,
    .projects-form-textarea:focus {
        border-color: var(--color-primary);
        background: var(--color-input-focus);
    }

    .projects-color-row {
        display: flex;
        gap: 0.5em;
        align-items: center;
        flex-wrap: wrap;
    }

    .projects-color-ball {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        /* border: 2px solid var(--color-border); */
        cursor: pointer;
        box-shadow: none;
        background-clip: padding-box;
        transition: opacity 0.15s ease;
    }

    .projects-color-ball:hover {
        opacity: 0.9;
    }

    .projects-color-ball.selected {
        box-shadow: 0 0 0 2px var(--color-panel), 0 0 0 4px var(--color-primary);
    }

    .projects-color-none {
        background: repeating-linear-gradient(45deg, transparent 0 6px, rgba(127, 127, 127, 0.12) 6px 12px);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .projects-color-x {
        font-size: 16px;
        line-height: 1;
        color: var(--color-text);
        opacity: 0.7;
    }

    .projects-disabled {
        opacity: 0.7;
    }

    .projects-input-with-button-wrapper {
        display: flex;
        gap: 0.5em;
        align-items: center;
    }

    .projects-input-with-button-wrapper input {
        flex-grow: 1;
    }

    @media (max-width: 640px) {
        .projects-input-with-button-wrapper {
            flex-direction: column;
            align-items: stretch;
        }
    }

</style>

</html>